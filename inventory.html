<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management</title>
    <link rel="stylesheet" href="inventory.css">
</head>
<body>
    <section id="inventory" class="admin-section">
    <div class="section-header">
        <h2>Inventory Management</h2>
    </div>
        <div class="inventory-actions">
        <a href="additem.html"><button class="btn btn-primary">Add Inventory Items</button></a>
        <a href="order.html"><button class="btn btn-primary">Order Inventory Items</button></a>
        <a href="updateitem.html"><button class="btn btn-secondary">Get Inventory Items</button></a>
    </div>
    <div class="inventory-filters">
        <div class="filter-group">
            <label for="category-filter">Category:</label>
                <select name="category" id="category-filter">
                <option value="all">All Categories</option>
                <option value="meat">Meat</option>
                <option value="vegetables">Vegetables</option>
                <option value="dairy">Dairy</option>
                <option value="beverages">Beverages</option>
                <option value="dry-goods">Dry Goods</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="stock-filter">Stock Level:</label>
            <select name="checkstock" id="stock-filter">
                <option value="all">All Items</option>
                <option value="low-stock">Low Stock</option>
                <option value="in-stock">In Stock</option>
                <option value="out-of-stock">Out of Stock</option>
            </select>
        </div>
        <!-- Larger Right-Aligned Search Bar -->
        <div class="search-bar-container">
            <input type="text" id="search-bar" placeholder="Search item name...">
        </div>
    </div>
    <div class="inventory-table" id="inventoryTable"></div>
            <table>
            <thead>
                <tr>
                    <th>Item ID</th>
                    <th>Item Name</th>
                    <th>Category</th>
                    <th>Current Stock</th>
                    <th>Unit</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    
    <div>
        <a href="dashboard.html">
            <button class="btn btn-back">Go Back</button>
        </a>
    </div>
    </section>
<script>
    function loadFilteredData() {
        const stock = document.getElementById('stock-filter').value;
        const category = document.getElementById('category-filter').value;
        const search = document.getElementById('search-bar').value;

        const data = `checkstock=${encodeURIComponent(stock)}&category=${encodeURIComponent(category)}&search=${encodeURIComponent(search)}`;
            fetch('inventory.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: data
        })
        .then(res => res.text())
        .then(html => {
            document.querySelector('#inventoryTable tbody').innerHTML = html;
        })
                .catch(() => {
            document.querySelector('#inventoryTable tbody').innerHTML = '<tr><td colspan="6">Failed to load data</td></tr>';
        });
    }
    window.onload = loadFilteredData;
    document.getElementById('stock-filter').onchange = loadFilteredData;
    document.getElementById('category-filter').onchange = loadFilteredData;
    document.getElementById('search-bar').oninput = loadFilteredData;
</script>
</body>
</html>